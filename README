dotsync
=======

dotsync keeps your local dotfiles in sync with a git repository and keeps 
multiple remote machines in sync, either with them pulling from the git 
repo or pushed via rsync

Master servers can be assigned, for cases where groups of machines are 
behind firewalls or only accessible from a certain location.

Requirements
============

dotsync assumes that you have ssh setup correctly, with ssh-agent and configs
for correct usernames etc, if you can 'ssh hostname' it probably wont work 
and if your asked for passwords it will take hours with any number of machines.

Installation
============

If you already have your dotfiles in a git repo...

    cd ~/.dotfiles
    git submodule add git@github.com:dotphiles/dotsync.git
    git submodule --init update

If you dont...

    git clone --recursive git@github.com:dotphiles/dotsync-dotfiles.git ~/.dotfiles

Copy your dotfiles into ~/.dotfiles without the dot...

Create a repo on github, or elsewhere as your central 'origin'...

    git remote set-url origin git@github.com:username/dotfiles.git

List your dotfiles in dotsyncrc without the dot...

    cp ~/.dotfiles/dotsync/dotsyncrc-example ~/.dotfiles/dotsyncrc

Checkin your changes...

    git commit -a -m "Initilising dotsync"
    git push origin master

Then, symlink your dotfiles into place...

    export PATH=~/.dotfiles/dotsync/bin:$PATH (add to you profile)
    dotsync -L

See the *Configuration* section for configuration info.

Then add hosts into dotsyncrc and `dotsync -I -H hostname` (at your own risk!)

Usage
=====

    -I          - Initialise a machine using dotsync
    -L          - Symlink available dotfiles into $HOME
    -u          - Update to the latest copy of dotfiles
    -U          - Update to the latest copy of dotfiles inc submodules
    -P          - Push any local changes back to the repo (git only)
    -H host     - Perform action against host listed in config, can be 'ALL'
    -a          - Updates dotfiles on all known machines
    -A          - Updates dotfiles and submodules on all known machines
    -r          - Use rsync instead of git
    -f conf     - Config file, defaults to '~/.dotsyncrc' or '$DOTSYNCRC'
    -d dotfiles - Location of dotfiles, defaults to '~/.dotfiles'
    -l          - List configured hosts and dotfiles to symlink
    -v          - Verbose
    -h          - Show help message

Configuration
=============

`~/.dotsyncrc`

This config determines which hosts to sync, how, where from and which 
dotfiles to symlink into your homedir. 

This file can be included in the repo, and dotsync will use it if its not 
already symlinked.

See dotsyncrc-example

`~/.dotfiles/.gitignore`

Controls which files are ignored from being added to the git repo, add any
temporary and 'secret' files here.

See gitignore-example

`~/dotfiles/.rsyncignore`

Controls which files are ignored when rsyncing a remote host, add any temporary
and 'secret' files here.

See rsyncignore-example

Issues
======

Probably lots!

If you not sure, keep an ssh session open to any remote machines, in case
it wipes your ssh keys but should be safe.

Existing files will be backed up in ~/.dotfiles/backups or ~/.dotfiles.backup

License
=======

Copyright (c) 2002-2012 "dotphiles"

This file is part of dotsync.

dotsync is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
